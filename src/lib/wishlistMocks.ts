import type { WatchItem } from '@/interfaces/watch';
import { WATCHES } from '@/data/watches';

/**
 * Мок-дані для вішліста
 *
 * ЧОМУ використовуємо існуючі WATCHES:
 * - Вже є готові дані з правильною структурою
 * - Не потрібно дублювати код
 * - Легше підтримувати
 *
 * АЛЬТЕРНАТИВА - створити окремі моки:
 * - Більше контролю над даними
 * - Але більше коду для підтримки
 */
export const mockWishlistWatches: WatchItem[] = WATCHES.slice(0, 10);
// Беремо перші 10 товарів для тестування

/**
 * Функція для отримання товару за ID
 *
 * ЧОМУ функція, а не об'єкт Map:
 * - Можна додати логіку (fallback, трансформацію)
 * - Легше розширювати
 * - Можна додати логування для дебагу
 *
 * АЛЬТЕРНАТИВА - Map:
 * - Швидше пошук O(1) замість O(n)
 * - Але для невеликої кількості товарів різниця незначна
 * - Функція більш гнучка
 *
 * @param id - ID товару
 * @returns WatchItem або null, якщо не знайдено
 */
export function getWatchById(id: string): WatchItem | null {
  /**
   * ЧОМУ find, а не filter[0]:
   * - find зупиняється на першому знайденому елементі
   * - filter проходить весь масив
   * - find більш ефективний
   */
  const watch = WATCHES.find((item) => item.id === id);

  /**
   * ЧОМУ повертаємо null, а не undefined:
   * - null - явне відсутнє значення
   * - undefined - невизначене значення
   * - null більш передбачувано для "не знайдено"
   */
  return watch || null;
}

/**
 * Функція для отримання кількох товарів за масивом ID
 *
 * ЧОМУ окрема функція:
 * - Оптимізація: можна використати Set для швидкого пошуку
 * - Зручніше для отримання кількох товарів одразу
 * - Підготовка до API запиту /api/watches/by-ids
 *
 * @param ids - масив ID товарів
 * @returns масив WatchItem (тільки знайдені, без null)
 */
export function getWatchesByIds(ids: string[]): WatchItem[] {
  /**
   * ЧОМУ Set для перевірки:
   * - Швидший пошук O(1) замість O(n)
   * - Особливо важливо для великої кількості ID
   *
   * АЛЬТЕРНАТИВА - includes:
   * - Простіше, але повільніше для багатьох ID
   */
  const idsSet = new Set(ids);

  /**
   * ЧОМУ filter + map, а не forEach + push:
   * - Функціональний підхід
   * - Не мутуємо масив
   * - Більш читабельно
   */
  return WATCHES.filter((watch) => idsSet.has(watch.id));
}

